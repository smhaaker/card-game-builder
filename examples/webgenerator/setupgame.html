<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <script type="text/javascript" src="../../src/cardframe.js"></script>

</head>

    <h1>Card Game Generator Simple HTML example</h1>
    <h3>Enter the info and hit generate</h3>
    <label for="gameName">
        <input type="text" id="gameName" placeholder="Name of Game">
    </label>
    
    <br>

    <div class="selectors">
    <label for="decksAmount">
        Amount of decks:
        <select id="decksAmount">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
    </label>
    <br>

    <label for="playerAmount">
        Players: 
        <select id="playerAmount">
            <option value=1>1</option>
            <option value=2>2</option>
            <option value=3>3</option>
            <option value=4>4</option>
        </select>
    </label>
    <br>
    </div>

    <button onclick="generate()">Generate Game Info</button>
    <br><br>
    <hr>
    <br>

    <div id="addCards">
        <label for="cardInfo">
            <input type="text" class="cardInputs" id="cardName" placeholder="Name of Card"><br>
            <input type="text" class="cardInputs" id="cardAmount" placeholder="Amount"><br>
            Image Url:  <input type="text" class="cardInputs" id="cardUrl" placeholder="ex. img/sprite6_0.png"><br>
            <input type="text" class="cardInputs" id="cardValue" placeholder="Value"><br>
            <input type="text" class="cardInputs" id="cardColor" placeholder="Color"><br>
            <input type="text" class="cardInputs" id="cardAbility" placeholder="Ability"><br>
            <input type="text" class="cardInputs" id="cardDesc" placeholder="Description"><br>
        </label>
        <button onclick="addCards()">add Cards</button>
    </div>

    <div id="generatedCard">
        <div id="newCard"></div>
        <button onclick="addToDeck()">add Cards to deck</button>
    </div>



        <button onclick="finalizeDeck()">Finalize Deck</button>
    <br><br><br>
    <h1 id='title'>title</h1>
    <h3 id='desc'>desc</h2>
    <h3> All Cards In Deck:</h3>
    <span id='completeDeck'>The whole deck</span>


<script>

    let config;
    let deckArr = [];
    let newCard;

    function generate() {

        let name = document.getElementById("gameName").value
        let decks = document.getElementById("decksAmount").value
        let players = document.getElementById("playerAmount").value

        // console.log(name)
        // console.log(decks)
        // console.log(players)
        config = new setupGame(name, parseInt(decks), 1, parseInt(players), 'desc')
        console.log(config)
        this.populate()
    }

    function addCards() {
        let cardName = document.getElementById("cardName").value
        let cardValue = document.getElementById("cardValue").value
        let cardAmount = document.getElementById("cardAmount").value
        let cardColor = document.getElementById("cardColor").value
        let cardAbility = document.getElementById("cardAbility").value
        let cardDesc = document.getElementById("cardDesc").value
        let cardUrl = document.getElementById("cardUrl").value // img/sprite6_0.png

        newCard = new createCardSet(cardAmount, cardName, cardValue, cardColor, cardAbility, cardDesc, cardUrl)
        console.log(newCard)
        let generated = document.getElementById('newCard')
        generated.innerHTML= `<div id="generatedCardToAdd"> 
            Name: ${newCard[0].cardName} <br>
            <div class="cardImgDiv">
                <img src='${newCard[0].additional[0]}' width=100% alt="image">
            </div>
            Value: ${newCard[0].value} <br>
            Color: ${newCard[0].color} <br>
            Abilities: ${newCard[0].abilities} <br>
            Description: ${newCard[0].description} <br>
            Amount: ${cardAmount} </div>`
    }

    function addToDeck(){
        console.log(newCard)
        deckArr.push(newCard)
        console.log(deckArr)
    }

    function finalizeDeck() {
        // fix the bug where if you readd cards it generates new numbers. Must check for ID. Probably in the array setup
        let finaldeck
        finaldeck = mergeSets(...deckArr)
        console.log(finaldeck)
        let deckOutput = document.getElementById('completeDeck')
        
        deckOutput.innerHTML = ''
        for(let i = 0; i<finaldeck.length; i++){
            deckOutput.innerHTML += `
            CardName: ${finaldeck[i].cardName} <br/>
            CardID: ${finaldeck[i].id} <br/>`
        }

    }

    function populate () {
        let h1Title = document.getElementById('title')
        h1Title.innerHTML = config.nameOfGame;
        let h2Desc = document.getElementById('desc')
        h2Desc.innerHTML = config.description;
    }



</script>

</html>